Voici un exemple de fonction getState qui prend en param√®tres l'initial amount et l'amount due pour d√©terminer l'√©tat d'une r√©servation :

// app/Helpers/ReservationHelper.php
namespace App\Helpers;

class ReservationHelper
{
    public static function getState($initialAmount, $amountDue)
    {
        if ($amountDue == 0) {
            return 'pay√©';
        } elseif ($amountDue > 0 && $amountDue < $initialAmount) {
            return 'partiellement pay√©';
        } elseif ($amountDue == $initialAmount) {
            return 'en attente de paiement';
        } else {
            return 'annul√©';
        }
    }
}

Vous pouvez ensuite appeler cette fonction dans les contr√¥leurs ReservationController et PaymentController pour affecter la valeur du champ state de la r√©servation √† la cr√©ation et apr√®s un paiement :

// app/Http/Controllers/ReservationController.php
namespace App\Http\Controllers;

use App\Helpers\ReservationHelper;
use App\Models\Reservation;

class ReservationController extends Controller
{
    public function store(Request $request)
    {
        $reservation = new Reservation();
        $reservation->initial_amount = $request->input('initial_amount');
        $reservation->amount_due = $request->input('amount_due');
        $reservation->state = ReservationHelper::getState($reservation->initial_amount, $reservation->amount_due);
        $reservation->save();

        return response()->json(['message' => 'R√©servation cr√©√©e avec succ√®s']);
    }
}

// app/Http/Controllers/PaymentController.php
namespace App\Http\Controllers;

use App\Helpers\ReservationHelper;
use App\Models\Reservation;

class PaymentController extends Controller
{
    public function store(Request $request)
    {
        $reservation = Reservation::find($request->input('reservation_id'));
        $reservation->amount_due = $reservation->amount_due - $request->input('payment_amount');
        $reservation->state = ReservationHelper::getState($reservation->initial_amount, $reservation->amount_due);
        $reservation->save();

        return response()->json(['message' => 'Paiement effectu√© avec succ√®s']);
    }
}

Notez que vous devez importer la classe ReservationHelper dans les contr√¥leurs pour pouvoir appeler la fonction getState.

==================================================

paiement
Voici les exemples de mail adapt√©s :

Pour les clients :

Objet : Confirmation de paiement pour votre r√©servation

Bonjour [Nom du client],

Nous sommes ravis de vous confirmer que votre paiement pour la r√©servation [Num√©ro de r√©servation] a √©t√© effectu√© avec succ√®s.

Cependant, nous vous rappelons que pour confirmer votre r√©servation, il est n√©cessaire de payer au moins 50% du montant total. Si vous n'avez pas encore effectu√© ce paiement, nous vous invitons √† le compl√©ter d√®s que possible pour √©viter que la ressource sollicit√©e ne soit attribu√©e √† quelqu'un d'autre.

Voici les d√©tails de votre r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date d'arriv√©e : [Date d'arriv√©e]
- Date de d√©part : [Date de d√©part]
- Type de chambre : [Type de chambre]
- Nombre de personnes : [Nombre de personnes]
- Tarif total : [Tarif total]
- Montant pay√© : [Montant pay√©]
- Montant restant √† payer : [Montant restant √† payer]

Pour compl√©ter le paiement, vous pouvez utiliser le lien suivant : [Lien de paiement]

Nous vous remercions de votre attention et nous nous r√©jouissons de vous accueillir dans notre √©tablissement.

Cordialement,

[Votre nom]
[Votre √©tablissement]

Pour les admins :

Objet : Notification de paiement pour la r√©servation [Num√©ro de r√©servation]

Bonjour [Nom de l'admin],

Nous vous informons que le paiement pour la r√©servation [Num√©ro de r√©servation] a √©t√© effectu√© avec succ√®s.

Cependant, nous vous rappelons que pour confirmer la r√©servation, il est n√©cessaire de payer au moins 50% du montant total. Si le client n'a pas encore effectu√© ce paiement, nous vous invitons √† le contacter pour le rappeler.

Voici les d√©tails de la r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date d'arriv√©e : [Date d'arriv√©e]
- Date de d√©part : [Date de d√©part]
- Type de chambre : [Type de chambre]
- Nombre de personnes : [Nombre de personnes]
- Tarif total : [Tarif total]
- Montant pay√© : [Montant pay√©]
- Montant restant √† payer : [Montant restant √† payer]
- Ressource r√©serv√©e : [Nom de la ressource]
- Admin ayant effectu√© le paiement : [Nom de l'admin]

Nous vous remercions de votre attention et nous vous invitons √† v√©rifier les d√©tails de la r√©servation.

Cordialement,

[Votre nom]
[Votre √©tablissement]
======================================================
new Reservation
üõëüõëüõë nouvelle r√©servation 

Voici les exemples de mail adapt√©s :

Pour les clients :

Objet : Confirmation de votre r√©servation

Bonjour [Nom du client],

Nous sommes ravis de vous confirmer que votre r√©servation pour [Nom de la ressource] a √©t√© effectu√©e avec succ√®s. Voici les d√©tails de votre r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date d'arriv√©e : [Date d'arriv√©e]
- Date de d√©part : [Date de d√©part]
- Type de ressource : [Type de ressource]
- Tarif total : [Tarif total]

Cependant, nous vous informons que malgr√© la r√©servation, rien ne garantit que la ressource vous soit attribu√©e. Pour y rem√©dier, il est n√©cessaire de payer au moins 50% du montant total de la r√©servation. Le reste des 50% devra √™tre pay√© avant l'heure de d√©but de la r√©servation.

Nous vous invitons √† effectuer le paiement d√®s que possible pour garantir la disponibilit√© de la ressource. Vous pouvez utiliser le lien suivant pour effectuer le paiement : [Lien de paiement]

Nous vous remercions de votre attention et nous nous r√©jouissons de vous accueillir dans notre √©tablissement.

Cordialement,

[Votre nom]
[Votre √©tablissement]

Pour les admins :

Objet : Notification de r√©servation pour [Nom de la ressource]

Bonjour [Nom de l'admin],

Nous vous informons que la r√©servation pour [Nom de la ressource] a √©t√© effectu√©e avec succ√®s. Voici les d√©tails de la r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date d'arriv√©e : [Date d'arriv√©e]
- Date de d√©part : [Date de d√©part]
- Type de ressource : [Type de ressource]
- Tarif total : [Tarif total]
- Client : [Nom du client]
- √âtat de la r√©servation : En attente de paiement

Nous vous rappelons que le client doit payer au moins 50% du montant total de la r√©servation pour garantir la disponibilit√© de la ressource. Le reste des 50% devra √™tre pay√© avant l'heure de d√©but de la r√©servation.

Nous vous invitons √† suivre l'√©tat de la r√©servation et √† contacter le client si n√©cessaire.

Cordialement,

[Votre nom]
[Votre √©tablissement]
==================================================================
new coupon

coupon de r√©duction 

Voici un exemple de contenu d'un email √† envoyer √† un utilisateur apr√®s qu'il vient de recevoir un nouveau coupon de r√©duction :

Objet : Nouveau coupon de r√©duction !

Bonjour [Nom de l'utilisateur],

Nous sommes ravis de vous annoncer que vous venez de recevoir un nouveau coupon de r√©duction ! Voici les d√©tails de votre coupon :

- Code de coupon : [Code de coupon]
- Pourcentage de r√©duction : [Pourcentage de r√©duction]%
- Montant maximum de r√©duction : [Montant maximum de r√©duction]
- Date de d√©but de validit√© : [Date de d√©but de validit√©]
- Date de fin de validit√© : [Date de fin de validit√©]
- Conditions d'utilisation : [Conditions d'utilisation]

Vous pouvez utiliser ce coupon pour b√©n√©ficier d'une r√©duction sur votre prochaine r√©servation. Pour utiliser le coupon, simplement saisissez le code de coupon lors de la r√©servation.

Nous vous remercions de votre fid√©lit√© et nous nous r√©jouissons de vous accueillir dans notre √©tablissement.

Cordialement,

[Votre nom]
[Votre √©tablissement]

P.S. N'oubliez pas de v√©rifier les conditions d'utilisation du coupon avant de l'utiliser.

===========================================================
debute dans 30 min
d√©but dans 30min 

Voici les exemples de mail adapt√©s :

Pour les clients :

Objet : Rappel de votre r√©servation - D√©but dans 30 minutes !

Bonjour [Nom du client],

Nous vous rappelons que votre r√©servation pour [Nom de la ressource] commence dans 30 minutes ! Voici les d√©tails de votre r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date et heure de d√©but : [Date et heure de d√©but]
- Date et heure de fin : [Date et heure de fin]
- Type de ressource : [Type de ressource]
- Tarif total : [Tarif total]
- Montant pay√© : [Montant pay√©]
- Montant restant √† payer : [Montant restant √† payer]

Nous vous rappelons que si le paiement n'est pas effectif ou total, vous devrez payer avant le d√©but de l'heure de la r√©servation. De plus, si les 50% de la r√©servation n'ont pas √©t√© vers√©s, rien ne garantit que la ressource soit disponible en agence.

Nous vous invitons √† v√©rifier votre paiement et √† nous contacter si vous avez des questions ou des pr√©occupations.

Cordialement,

[Votre nom]
[Votre √©tablissement]

Pour les admins :

Objet : Rappel de r√©servation - D√©but dans 30 minutes !

Bonjour [Nom de l'admin],

Nous vous rappelons que la r√©servation pour [Nom de la ressource] commence dans 30 minutes ! Voici les d√©tails de la r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date et heure de d√©but : [Date et heure de d√©but]
- Date et heure de fin : [Date et heure de fin]
- Type de ressource : [Type de ressource]
- Tarif total : [Tarif total]
- Montant pay√© : [Montant pay√©]
- Montant restant √† payer : [Montant restant √† payer]
- Client : [Nom du client]

Nous vous rappelons que si le paiement n'est pas effectif ou total, le client devra payer avant le d√©but de l'heure de la r√©servation. De plus, si les 50% de la r√©servation n'ont pas √©t√© vers√©s, rien ne garantit que la ressource soit disponible en agence.

Nous vous invitons √† v√©rifier le paiement et √† contacter le client si n√©cessaire.

Cordialement,

[Votre nom]
[Votre √©tablissement]

=======================================================
fin dans 30min

fin dans 30min

Voici les exemples de mail adapt√©s :

Pour les clients :

Objet : Rappel de fin de r√©servation - 30 minutes avant la fin !

Bonjour [Nom du client],

Nous vous rappelons que votre r√©servation pour [Nom de la ressource] se termine dans 30 minutes ! Voici les d√©tails de votre r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date et heure de d√©but : [Date et heure de d√©but]
- Date et heure de fin : [Date et heure de fin]
- Type de ressource : [Type de ressource]
- Tarif total : [Tarif total]
- Montant pay√© : [Montant pay√©]

Nous vous invitons √† pr√©parer vos affaires et √† quitter les lieux avant la fin de la r√©servation. Si vous avez des questions ou des pr√©occupations, n'h√©sitez pas √† nous contacter.

Cordialement,

[Votre nom]
[Votre √©tablissement]

Pour les admins :

Objet : Rappel de fin de r√©servation - 30 minutes avant la fin !

Bonjour [Nom de l'admin],

Nous vous rappelons que la r√©servation pour [Nom de la ressource] se termine dans 30 minutes ! Voici les d√©tails de la r√©servation :

- Num√©ro de r√©servation : [Num√©ro de r√©servation]
- Date et heure de d√©but : [Date et heure de d√©but]
- Date et heure de fin : [Date et heure de fin]
- Type de ressource : [Type de ressource]
- Tarif total : [Tarif total]
- Montant pay√© : [Montant pay√©]
- Client : [Nom du client]

Nous vous invitons √† v√©rifier que le client a quitt√© les lieux avant la fin de la r√©servation et √† proc√©der √† la v√©rification des lieux et des √©quipements.

Cordialement,

[Votre nom]
[Votre √©tablissement]

=========================================================
coupon expire

oupon expir√© 

Voici un exemple d'un email √† envoyer √† un client pour lui rappeler que le coupon de r√©duction qu'il a re√ßu a expir√© :

Objet : Coupon de r√©duction expir√©

Bonjour [Nom du client],

Nous vous rappelons que le coupon de r√©duction que vous avez re√ßu pour [Nom de la ressource] a expir√© le [Date d'expiration]. Voici les d√©tails du coupon :

- Code de coupon : [Code de coupon]
- Pourcentage de r√©duction : [Pourcentage de r√©duction]%
- Montant maximum de r√©duction : [Montant maximum de r√©duction]
- Date de d√©but de validit√© : [Date de d√©but de validit√©]
- Date d'expiration : [Date d'expiration]

Nous regrettons que vous n'ayez pas pu utiliser ce coupon avant son expiration. Si vous souhaitez continuer √† b√©n√©ficier de r√©ductions et d'offres sp√©ciales, nous vous invitons √† vous inscrire √† notre newsletter ou √† suivre nos r√©seaux sociaux.

Nous vous remercions de votre fid√©lit√© et nous nous r√©jouissons de vous accueillir dans notre √©tablissement.

Cordialement,

[Votre nom]
[Votre √©tablissement]